<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>[JavaScript] removeEventListener()가 작동하지 않는 경우</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/fe61a01172b48163.css" as="style"/><link rel="stylesheet" href="/_next/static/css/fe61a01172b48163.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-64ad27b21261a9ce.js" defer=""></script><script src="/_next/static/chunks/main-255184d91ce2f8ee.js" defer=""></script><script src="/_next/static/chunks/pages/_app-4de54a1809dadaf9.js" defer=""></script><script src="/_next/static/chunks/247-a50e28d3c3b049f0.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-41d2529b23321b2b.js" defer=""></script><script src="/_next/static/jAsJ9ixl6_2otkyC8owG4/_buildManifest.js" defer=""></script><script src="/_next/static/jAsJ9ixl6_2otkyC8owG4/_ssgManifest.js" defer=""></script></head><body class="antialiased"><div id="__next"><div class="flex flex-col gap-y-8 p-4 max-w-screen-xl min-w-80 w-full m-auto"><header class="p-4 border-2 border-x-0 border-t-0 border-b-slate-200"><nav class="mx-auto flex items-center justify-between"><div class="lg:flex-1"><a class="font-bold" href="/">HOME</a></div><div class="flex lg:gap-x-12"></div></nav></header><div class="flex flex-col max-w-screen-md min-w-80 w-full m-auto bg-white rounded-3xl p-8"><p class="text-4xl font-bold">[JavaScript] removeEventListener()가 작동하지 않는 경우</p><div class="flex flex-row gap-x-4 my-4 items-center text-neutral-500"><div class="flex flex-row gap-x-2"><img alt="Autor image" loading="lazy" width="24" height="24" decoding="async" data-nimg="1" class="rounded-full" style="color:transparent" src="https://avatars.githubusercontent.com/u/10252712?v=4"/><p>Younghyun Kim</p></div><div class="border-s border-neutral-400 h-5"></div><p>Fri Oct 11 2024</p></div><div class="flex flex-row gap-x-2"><p class="rounded-xl bg-neutral-200 text-sm font-semibold py-0.5 px-1">JavaScript</p></div><div class="max-w-full prose prose-headings:mt-8 prose-headings:font-semibold prose-headings:text-black prose-h1:text-4xl prose-h2:text-3xl prose-h3:text-2xl prose-h4:text-xl prose-h5:text-lg prose-h6:text-base dark:prose-headings:text-white prose-img:max-w-xl prose-img:mx-auto"><h3>문제 상황</h3>
<p><code>removeEventListener()</code>를 호출해도 해당 리스너가 계속 작동되는 문제를 겪었습니다.</p>
<h3>removeEventListener()를 통한 이벤트 제거</h3>
<p>일반적으로, 이벤트 리스너를 제거할 때는 <code>removeEventListener()</code>를 통해 해당 리스너를 제거합니다.</p>
<pre><code class="language-js">// EXAMPLE
function eventClick() {...}
element.addEventListener(&#x27;click&#x27;, eventClick); // 이벤트 리스너 생성
...
element.removeEventListener(&#x27;click&#x27;, eventClick); // 이벤트 리스너 제거
</code></pre>
<blockquote>
<p>만약, <strong>익명 함수</strong>를 콜백 함수로 등록한 경우, 해당 이벤트는 제거할 수 없습니다.</p>
</blockquote>
<p>하지만, 저는 위 방법대로 <code>removeEventListener()</code>를 호출했지만 해당 리스너가 제거되지 않는 문제를 겪었습니다.<br/>
<!-- -->정확한 원인을 파악하진 못했지만, 이벤트 리스너를 확실하게 중단하는 방법을 알아냈습니다.</p>
<h3>중단 가능한 이벤트 리스너 등록</h3>
<p><code>addEventListener()</code> 사용 시, <code>signal</code>옵션에 <code>AbortSignal</code>을 등록합니다.</p>
<pre><code class="language-js">// AbortSignal을 제어하기 위해 AbortController 생성
const controller = new AbortController();
element.addEventListener(&quot;click&quot;, eventClick, { signal: controller.signal });
</code></pre>
<p><code>AbortController</code>의 속성 <code>signal</code>이 <code>AbortSignal</code>입니다.</p>
<p>이 때, <code>signal.aborted</code>는 <code>false</code> 값을 가집니다.</p>
<h3>AbortController를 통한 이벤트 리스너 중단</h3>
<p><code>abort()</code> 함수만 호출하면, 해당 <code>signal</code>에 등록된 리스너가 모두 중단됩니다.<br/>
<!-- -->(콜백 함수가 익명이어도 <code>signal</code>에 등록되었다면 중단됩니다.)</p>
<pre><code class="language-js">controller.abort();
</code></pre>
<p>이 때, <code>signal.aborted</code>는 <code>true</code>로 전환됩니다.</p>
<h3>AbortController 재사용</h3>
<p>만약, 이 상태에서 새로운 리스너를 등록하면 어떻게 될까요?</p>
<pre><code class="language-js">// signal.aborted = true 일 때,
element.addEventListener(&quot;touch&quot;, eventTouch, { signal: controller.signal });
</code></pre>
<p>이미 <code>aborted</code> 값이 <code>true</code>이기 때문에 위 코드에서 등록한 리스너는 작동하지 않습니다.</p>
<p><code>AbortSignal</code>의 속성 <code>aborted</code>는 읽기 전용 속성으로, 직접 값을 변경할 수 없으며, 오직 <code>AbortController</code>의<code>abort()</code> 함수를 통해서만 false -&gt; true로 변경됩니다.</p>
<p>중단 가능한 이벤트를 다시 생성하려면, 새로운 <code>AbortController</code>를 생성해야할 것 같습니다.</p>
<h3>참조</h3>
<p><a href="https://developer.mozilla.org/ko/docs/Web/API/EventTarget/addEventListener">https://developer.mozilla.org/ko/docs/Web/API/EventTarget/addEventListener</a>
<a href="https://developer.mozilla.org/ko/docs/Web/API/AbortSignal">https://developer.mozilla.org/ko/docs/Web/API/AbortSignal</a>
<a href="https://developer.mozilla.org/ko/docs/Web/API/AbortController">https://developer.mozilla.org/ko/docs/Web/API/AbortController</a></p></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"content":{"compiledSource":"\"use strict\";\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = {\n    a: \"a\",\n    blockquote: \"blockquote\",\n    br: \"br\",\n    code: \"code\",\n    h3: \"h3\",\n    p: \"p\",\n    pre: \"pre\",\n    strong: \"strong\",\n    ..._provideComponents(),\n    ...props.components\n  };\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h3, {\n      children: \"문제 상황\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"removeEventListener()\"\n      }), \"를 호출해도 해당 리스너가 계속 작동되는 문제를 겪었습니다.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"removeEventListener()를 통한 이벤트 제거\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"일반적으로, 이벤트 리스너를 제거할 때는 \", _jsx(_components.code, {\n        children: \"removeEventListener()\"\n      }), \"를 통해 해당 리스너를 제거합니다.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-js\",\n        children: \"// EXAMPLE\\nfunction eventClick() {...}\\nelement.addEventListener('click', eventClick); // 이벤트 리스너 생성\\n...\\nelement.removeEventListener('click', eventClick); // 이벤트 리스너 제거\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsxs(_components.p, {\n        children: [\"만약, \", _jsx(_components.strong, {\n          children: \"익명 함수\"\n        }), \"를 콜백 함수로 등록한 경우, 해당 이벤트는 제거할 수 없습니다.\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"하지만, 저는 위 방법대로 \", _jsx(_components.code, {\n        children: \"removeEventListener()\"\n      }), \"를 호출했지만 해당 리스너가 제거되지 않는 문제를 겪었습니다.\", _jsx(_components.br, {}), \"\\n\", \"정확한 원인을 파악하진 못했지만, 이벤트 리스너를 확실하게 중단하는 방법을 알아냈습니다.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"중단 가능한 이벤트 리스너 등록\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"addEventListener()\"\n      }), \" 사용 시, \", _jsx(_components.code, {\n        children: \"signal\"\n      }), \"옵션에 \", _jsx(_components.code, {\n        children: \"AbortSignal\"\n      }), \"을 등록합니다.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-js\",\n        children: \"// AbortSignal을 제어하기 위해 AbortController 생성\\nconst controller = new AbortController();\\nelement.addEventListener(\\\"click\\\", eventClick, { signal: controller.signal });\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"AbortController\"\n      }), \"의 속성 \", _jsx(_components.code, {\n        children: \"signal\"\n      }), \"이 \", _jsx(_components.code, {\n        children: \"AbortSignal\"\n      }), \"입니다.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"이 때, \", _jsx(_components.code, {\n        children: \"signal.aborted\"\n      }), \"는 \", _jsx(_components.code, {\n        children: \"false\"\n      }), \" 값을 가집니다.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"AbortController를 통한 이벤트 리스너 중단\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"abort()\"\n      }), \" 함수만 호출하면, 해당 \", _jsx(_components.code, {\n        children: \"signal\"\n      }), \"에 등록된 리스너가 모두 중단됩니다.\", _jsx(_components.br, {}), \"\\n\", \"(콜백 함수가 익명이어도 \", _jsx(_components.code, {\n        children: \"signal\"\n      }), \"에 등록되었다면 중단됩니다.)\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-js\",\n        children: \"controller.abort();\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"이 때, \", _jsx(_components.code, {\n        children: \"signal.aborted\"\n      }), \"는 \", _jsx(_components.code, {\n        children: \"true\"\n      }), \"로 전환됩니다.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"AbortController 재사용\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"만약, 이 상태에서 새로운 리스너를 등록하면 어떻게 될까요?\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-js\",\n        children: \"// signal.aborted = true 일 때,\\nelement.addEventListener(\\\"touch\\\", eventTouch, { signal: controller.signal });\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"이미 \", _jsx(_components.code, {\n        children: \"aborted\"\n      }), \" 값이 \", _jsx(_components.code, {\n        children: \"true\"\n      }), \"이기 때문에 위 코드에서 등록한 리스너는 작동하지 않습니다.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"AbortSignal\"\n      }), \"의 속성 \", _jsx(_components.code, {\n        children: \"aborted\"\n      }), \"는 읽기 전용 속성으로, 직접 값을 변경할 수 없으며, 오직 \", _jsx(_components.code, {\n        children: \"AbortController\"\n      }), \"의\", _jsx(_components.code, {\n        children: \"abort()\"\n      }), \" 함수를 통해서만 false -\u003e true로 변경됩니다.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"중단 가능한 이벤트를 다시 생성하려면, 새로운 \", _jsx(_components.code, {\n        children: \"AbortController\"\n      }), \"를 생성해야할 것 같습니다.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"참조\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.a, {\n        href: \"https://developer.mozilla.org/ko/docs/Web/API/EventTarget/addEventListener\",\n        children: \"https://developer.mozilla.org/ko/docs/Web/API/EventTarget/addEventListener\"\n      }), \"\\n\", _jsx(_components.a, {\n        href: \"https://developer.mozilla.org/ko/docs/Web/API/AbortSignal\",\n        children: \"https://developer.mozilla.org/ko/docs/Web/API/AbortSignal\"\n      }), \"\\n\", _jsx(_components.a, {\n        href: \"https://developer.mozilla.org/ko/docs/Web/API/AbortController\",\n        children: \"https://developer.mozilla.org/ko/docs/Web/API/AbortController\"\n      })]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = {\n    ..._provideComponents(),\n    ...props.components\n  };\n  return MDXLayout ? _jsx(MDXLayout, {\n    ...props,\n    children: _jsx(_createMdxContent, {\n      ...props\n    })\n  }) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{"title":"[JavaScript] removeEventListener()가 작동하지 않는 경우","description":"AbortSignal로 확실하게 중단할 수 있는 이벤트 리스너를 다룹니다.","author":"Younghyun Kim","authorImg":"https://avatars.githubusercontent.com/u/10252712?v=4","date":"2024-10-11","tag":["JavaScript"]},"scope":{}},"data":{"title":"[JavaScript] removeEventListener()가 작동하지 않는 경우","description":"AbortSignal로 확실하게 중단할 수 있는 이벤트 리스너를 다룹니다.","author":"Younghyun Kim","authorImg":"https://avatars.githubusercontent.com/u/10252712?v=4","date":"2024-10-11","tag":["JavaScript"]}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"js-abort-eventlistener"},"buildId":"jAsJ9ixl6_2otkyC8owG4","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>